!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,r){!function(e,t){if(!g[e]||!b[e])return;for(var r in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,r)&&(p[r]=t[r]);0==--y&&0===v&&O()}(e,r),t&&t(e,r)};var r,n=!0,o="0e94af77abf0687fecfa",i=1e4,c={},s=[],a=[];function l(e){var t=k[e];if(!t)return E;var n=function(n){return t.hot.active?(k[n]?-1===k[n].parents.indexOf(e)&&k[n].parents.push(e):(s=[e],r=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),s=[]),E(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return E[e]},set:function(t){E[e]=t}}};for(var i in E)Object.prototype.hasOwnProperty.call(E,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(n,i,o(i));return n.e=function(e){return"ready"===d&&h("prepare"),v++,E.e(e).then(t,function(e){throw t(),e});function t(){v--,"prepare"===d&&(m[e]||D(e),0===v&&0===y&&O())}},n.t=function(e,t){return 1&t&&(e=n(e)),E.t(e,-2&t)},n}var u=[],d="idle";function h(e){d=e;for(var t=0;t<u.length;t++)u[t].call(null,e)}var f,p,w,y=0,v=0,m={},b={},g={};function P(e){return+e+""===e?+e:e}function A(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return n=e,h("check"),function(e){return e=e||1e4,new Promise(function(t,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,i=E.p+""+o+".hot-update.json";n.open("GET",i,!0),n.timeout=e,n.send(null)}catch(e){return r(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+i+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(e){return void r(e)}t(e)}}})}(i).then(function(e){if(!e)return h("idle"),null;b={},m={},g=e.c,w=e.h,h("prepare");var t=new Promise(function(e,t){f={resolve:e,reject:t}});p={};return D(0),"prepare"===d&&0===v&&0===y&&O(),t})}function D(e){g[e]?(b[e]=!0,y++,function(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.charset="utf-8",r.src=E.p+""+e+"."+o+".hot-update.js",t.appendChild(r)}(e)):m[e]=!0}function O(){h("ready");var e=f;if(f=null,e)if(n)Promise.resolve().then(function(){return _(n)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&t.push(P(r));e.resolve(t)}}function _(t){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var r,n,i,a,l;function u(e){for(var t=[e],r={},n=t.slice().map(function(e){return{chain:[e],id:e}});n.length>0;){var o=n.pop(),i=o.id,c=o.chain;if((a=k[i])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:i};if(a.hot._main)return{type:"unaccepted",chain:c,moduleId:i};for(var s=0;s<a.parents.length;s++){var l=a.parents[s],u=k[l];if(u){if(u.hot._declinedDependencies[i])return{type:"declined",chain:c.concat([l]),moduleId:i,parentId:l};-1===t.indexOf(l)&&(u.hot._acceptedDependencies[i]?(r[l]||(r[l]=[]),f(r[l],[i])):(delete r[l],t.push(l),n.push({chain:c.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var y={},v=[],m={},b=function(){console.warn("[HMR] unexpected require("+D.moduleId+") to disposed module")};for(var A in p)if(Object.prototype.hasOwnProperty.call(p,A)){var D;l=P(A);var O=!1,_=!1,j=!1,C="";switch((D=p[A]?u(l):{type:"disposed",moduleId:A}).chain&&(C="\nUpdate propagation: "+D.chain.join(" -> ")),D.type){case"self-declined":t.onDeclined&&t.onDeclined(D),t.ignoreDeclined||(O=new Error("Aborted because of self decline: "+D.moduleId+C));break;case"declined":t.onDeclined&&t.onDeclined(D),t.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+D.moduleId+" in "+D.parentId+C));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(D),t.ignoreUnaccepted||(O=new Error("Aborted because "+l+" is not accepted"+C));break;case"accepted":t.onAccepted&&t.onAccepted(D),_=!0;break;case"disposed":t.onDisposed&&t.onDisposed(D),j=!0;break;default:throw new Error("Unexception type "+D.type)}if(O)return h("abort"),Promise.reject(O);if(_)for(l in m[l]=p[l],f(v,D.outdatedModules),D.outdatedDependencies)Object.prototype.hasOwnProperty.call(D.outdatedDependencies,l)&&(y[l]||(y[l]=[]),f(y[l],D.outdatedDependencies[l]));j&&(f(v,[D.moduleId]),m[l]=b)}var x,R=[];for(n=0;n<v.length;n++)l=v[n],k[l]&&k[l].hot._selfAccepted&&R.push({module:l,errorHandler:k[l].hot._selfAccepted});h("dispose"),Object.keys(g).forEach(function(e){!1===g[e]&&function(e){delete installedChunks[e]}(e)});for(var H,B,M=v.slice();M.length>0;)if(l=M.pop(),a=k[l]){var I={},S=a.hot._disposeHandlers;for(i=0;i<S.length;i++)(r=S[i])(I);for(c[l]=I,a.hot.active=!1,delete k[l],delete y[l],i=0;i<a.children.length;i++){var T=k[a.children[i]];T&&((x=T.parents.indexOf(l))>=0&&T.parents.splice(x,1))}}for(l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&(a=k[l]))for(B=y[l],i=0;i<B.length;i++)H=B[i],(x=a.children.indexOf(H))>=0&&a.children.splice(x,1);for(l in h("apply"),o=w,m)Object.prototype.hasOwnProperty.call(m,l)&&(e[l]=m[l]);var q=null;for(l in y)if(Object.prototype.hasOwnProperty.call(y,l)&&(a=k[l])){B=y[l];var L=[];for(n=0;n<B.length;n++)if(H=B[n],r=a.hot._acceptedDependencies[H]){if(-1!==L.indexOf(r))continue;L.push(r)}for(n=0;n<L.length;n++){r=L[n];try{r(B)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:B[n],error:e}),t.ignoreErrored||q||(q=e)}}}for(n=0;n<R.length;n++){var U=R[n];l=U.module,s=[l];try{E(l)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:r,originalError:e}),t.ignoreErrored||q||(q=r),q||(q=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||q||(q=e)}}return q?(h("fail"),Promise.reject(q)):(h("idle"),new Promise(function(e){e(v)}))}var k={};function E(t){if(k[t])return k[t].exports;var n=k[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,r){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=r||function(){};else t._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._declinedDependencies[e[r]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=t._disposeHandlers.indexOf(e);r>=0&&t._disposeHandlers.splice(r,1)},check:A,apply:_,status:function(e){if(!e)return d;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var t=u.indexOf(e);t>=0&&u.splice(t,1)},data:c[e]};return r=void 0,t}(t),parents:(a=s,s=[],a),children:[]};return e[t].call(n.exports,n,n.exports,l(t)),n.l=!0,n.exports}E.m=e,E.c=k,E.d=function(e,t,r){E.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},E.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},E.t=function(e,t){if(1&t&&(e=E(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(E.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)E.d(r,n,function(t){return e[t]}.bind(null,n));return r},E.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return E.d(t,"a",t),t},E.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},E.p="",E.h=function(){return o},l(0)(E.s=0)}([function(e,t){var r,n;!function(e){e.LightBlue="cyan",e.DarkBlue="blue",e.Orange="orange",e.Yellow="yellow",e.LightGreen="green",e.Purple="purple",e.Red="red",e.Background="#eee"}(r||(r={})),function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D"}(n||(n={}));class o{constructor(e,t){this.column=e,this.row=t}}class i{constructor(e,t,r){this.color=e,this.orientation=t,this.tiler=r}toTiles(e){return this.tiler(e,this.orientation)}rotate(e){return new i(this.color,e?function(e){const{A:t,B:r,C:o,D:i}=n;switch(e){case t:return r;case r:return o;case o:return i;case i:return t}}(this.orientation):function(e){const{A:t,B:r,C:o,D:i}=n;switch(e){case t:return i;case r:return t;case o:return r;case i:return o}}(this.orientation),this.tiler)}}function c(e,t){const r=Array();return t.forEach((t,n)=>{t.forEach((t,i)=>{t&&r.push(new o(e.column+i,e.row+n))})}),r}const s=[function(){return new i(r.LightBlue,n.A,function(e,t){switch(t){case n.A:return c(e,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]);case n.B:return c(e,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]);case n.C:return c(e,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]);case n.D:return c(e,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]])}})},function(){return new i(r.DarkBlue,n.A,function(e,t){switch(t){case n.A:return c(e,[[1,0,0],[1,1,1],[0,0,0]]);case n.B:return c(e,[[0,1,1],[0,1,0],[0,1,0]]);case n.C:return c(e,[[0,0,0],[1,1,1],[0,0,1]]);case n.D:return c(e,[[0,1,0],[0,1,0],[1,1,0]])}})},function(){return new i(r.Orange,n.A,function(e,t){switch(t){case n.A:return c(e,[[0,0,1],[1,1,1],[0,0,0]]);case n.B:return c(e,[[0,1,0],[0,1,0],[0,1,1]]);case n.C:return c(e,[[0,0,0],[1,1,1],[1,0,0]]);case n.D:return c(e,[[1,1,0],[0,1,0],[0,1,0]])}})},function(){return new i(r.Yellow,n.A,function(e,t){return c(e,[[1,1],[1,1]])})},function(){return new i(r.LightGreen,n.A,function(e,t){switch(t){case n.A:return c(e,[[0,1,1],[1,1,0],[0,0,0]]);case n.B:return c(e,[[0,1,0],[0,1,1],[0,0,1]]);case n.C:return c(e,[[0,0,0],[0,1,1],[1,1,0]]);case n.D:return c(e,[[1,0,0],[1,1,0],[0,1,0]])}})},function(){return new i(r.Purple,n.A,function(e,t){switch(t){case n.A:return c(e,[[0,1,0],[1,1,1],[0,0,0]]);case n.B:return c(e,[[0,1,0],[0,1,1],[0,1,0]]);case n.C:return c(e,[[0,0,0],[1,1,1],[0,1,0]]);case n.D:return c(e,[[0,1,0],[1,1,0],[0,1,0]])}})},function(){return new i(r.Red,n.A,function(e,t){switch(t){case n.A:return c(e,[[1,1,0],[0,1,1],[0,0,0]]);case n.B:return c(e,[[0,0,1],[0,1,1],[0,1,0]]);case n.C:return c(e,[[0,0,0],[1,1,0],[0,1,1]]);case n.D:return c(e,[[0,1,0],[1,1,0],[1,0,0]])}})}],a=new class{constructor(e=10,t=20){this.columns=e,this.rows=t,this.cells=new Array(t);for(let r=0;r<t;r++)this.cells[r]=new Array(e)}addPiece(e,t){const r=e.toTiles(t);return!!this.canAdd(r)&&(this.update(r,e),!0)}remove(e,t){const r=e.toTiles(t);this.update(r,null)}deleteRow(e){this.cells[e].forEach((e,t,r)=>{r[t]=null});for(let t=e-1;t>=0;t--)this.cells[t].forEach((e,r)=>{this.cells[t+1][r]=e})}colorOf(e,t){const r=this.cells[t][e];return r&&r.color}findFullRows(){const e=e=>{let t=0;for(let r=0;r<e.length;r++){const n=e[r];null!==n&&void 0!==n&&t++}return t===e.length},t=[];for(let r=0;r<this.cells.length;r++)e(this.cells[r])&&t.push(r);return t}canAdd(e){return e.every(({column:e,row:t})=>e>=0&&e<this.columns&&t>=0&&t<this.rows&&null==this.cells[t][e])}update(e,t){e.forEach(({column:e,row:r})=>{this.cells[r][e]=t})}},l=new class{constructor(e=30,t){this.tilePx=e,this.board=t;const{columns:r,rows:n}=t;this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",(e*r).toString()),this.canvas.setAttribute("height",(e*n).toString()),this.ctx=this.canvas.getContext("2d")}render(e=[],t=1){const{columns:n,rows:o}=this.board,{tilePx:i,ctx:c}=this;for(let s=0;s<o;s++)for(let o=0;o<n;o++){let n=this.board.colorOf(o,s);c.beginPath(),c.clearRect(o*i,s*i,i,i),c.rect(o*i,s*i,i,i),n?(-1!==e.indexOf(s)?c.globalAlpha=t:c.globalAlpha=1,c.fillStyle=n,c.strokeStyle="rgba(0, 0, 0, 0.5)"):(c.fillStyle=r.Background,c.strokeStyle="rgba(255, 255, 255, 0.5)"),c.fill(),c.stroke(),c.closePath()}}}(30,a),u=new class{constructor(e,t,r){this.board=e,this.renderer=t,this.pieces=r,this.lastTickTime=0,this.currentPeriodMillis=800,this.dropping=!1,this.fullRows=[]}start(){const e=this;window.requestAnimationFrame(function t(){e.tick(),window.requestAnimationFrame(t)})}tick(){if(this.fullRows.length>0)if(this.fullRowAlpha-=.04,this.fullRowAlpha>0)this.renderer.render(this.fullRows,this.fullRowAlpha);else{for(let e of this.fullRows)this.board.deleteRow(e);this.fullRows=[],this.renderer.render()}else{const e=Date.now(),t=this.dropping?20:this.currentPeriodMillis;e-this.lastTickTime>=t&&(this.currentPiece?this.advance():this.newPiece(),this.renderer.render(),this.lastTickTime=e)}}advance(){const{column:e,row:t}=this.currentCenter,r=new o(e,t+1);this.updateCurrent(this.currentPiece,r)||(this.fullRows=this.board.findFullRows(),0==this.fullRows.length?this.newPiece():this.fullRowAlpha=1)}newPiece(){this.dropping=!1;const e=this.randomPiece();this.addPiece(e,new o(4,0))}addPiece(e,t){this.board.addPiece(e,t)&&(this.currentPiece=e,this.currentCenter=t)}rotate(e){if(this.currentPiece&&!this.dropping){const t=this.currentPiece.rotate(e);this.updateCurrent(t,this.currentCenter)}}shift(e){if(this.currentPiece&&!this.dropping){const{column:t,row:r}=this.currentCenter,n=new o(t+(e?1:-1),r);this.updateCurrent(this.currentPiece,n)}}drop(){this.dropping=!0}updateCurrent(e,t){return this.board.remove(this.currentPiece,this.currentCenter),this.board.addPiece(e,t)?(this.currentPiece=e,this.currentCenter=t,this.renderer.render(),!0):(this.board.addPiece(this.currentPiece,this.currentCenter),!1)}randomPiece(){return this.pieces[Math.floor(Math.random()*this.pieces.length)]()}}(a,l,s);document.body.appendChild(l.canvas),l.render(),window.game=u,document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":u.rotate(!1);break;case"ArrowDown":u.rotate(!0);break;case"ArrowLeft":u.shift(!1);break;case"ArrowRight":u.shift(!0);break;case" ":u.drop()}}),u.start()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbInBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrIiwid2luZG93IiwiY2h1bmtJZCIsIm1vcmVNb2R1bGVzIiwiaG90QXZhaWxhYmxlRmlsZXNNYXAiLCJob3RSZXF1ZXN0ZWRGaWxlc01hcCIsIm1vZHVsZUlkIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaG90VXBkYXRlIiwiaG90V2FpdGluZ0ZpbGVzIiwiaG90Q2h1bmtzTG9hZGluZyIsImhvdFVwZGF0ZURvd25sb2FkZWQiLCJob3RBZGRVcGRhdGVDaHVuayIsImhvdEN1cnJlbnRDaGlsZE1vZHVsZSIsImhvdEFwcGx5T25VcGRhdGUiLCJob3RDdXJyZW50SGFzaCIsImhvdFJlcXVlc3RUaW1lb3V0IiwiaG90Q3VycmVudE1vZHVsZURhdGEiLCJob3RDdXJyZW50UGFyZW50cyIsImhvdEN1cnJlbnRQYXJlbnRzVGVtcCIsImhvdENyZWF0ZVJlcXVpcmUiLCJtZSIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZm4iLCJyZXF1ZXN0IiwiaG90IiwiYWN0aXZlIiwicGFyZW50cyIsImluZGV4T2YiLCJwdXNoIiwiY2hpbGRyZW4iLCJjb25zb2xlIiwid2FybiIsIk9iamVjdEZhY3RvcnkiLCJuYW1lIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInNldCIsInZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlIiwiaG90U3RhdHVzIiwiaG90U2V0U3RhdHVzIiwidGhlbiIsImZpbmlzaENodW5rTG9hZGluZyIsImVyciIsImhvdFdhaXRpbmdGaWxlc01hcCIsImhvdEVuc3VyZVVwZGF0ZUNodW5rIiwidCIsIm1vZGUiLCJob3RTdGF0dXNIYW5kbGVycyIsIm5ld1N0YXR1cyIsImkiLCJsZW5ndGgiLCJob3REZWZlcnJlZCIsImhvdFVwZGF0ZU5ld0hhc2giLCJ0b01vZHVsZUlkIiwiaWQiLCJob3RDaGVjayIsImFwcGx5IiwiRXJyb3IiLCJyZXF1ZXN0VGltZW91dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiWE1MSHR0cFJlcXVlc3QiLCJyZXF1ZXN0UGF0aCIsInAiLCJvcGVuIiwidGltZW91dCIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwidXBkYXRlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiaG90RG93bmxvYWRNYW5pZmVzdCIsImMiLCJoIiwicHJvbWlzZSIsImhlYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsImNoYXJzZXQiLCJzcmMiLCJhcHBlbmRDaGlsZCIsImhvdERvd25sb2FkVXBkYXRlQ2h1bmsiLCJkZWZlcnJlZCIsImhvdEFwcGx5IiwicmVzdWx0Iiwib3V0ZGF0ZWRNb2R1bGVzIiwib3B0aW9ucyIsImNiIiwiaiIsIm1vZHVsZSIsImdldEFmZmVjdGVkU3R1ZmYiLCJ1cGRhdGVNb2R1bGVJZCIsIm91dGRhdGVkRGVwZW5kZW5jaWVzIiwicXVldWUiLCJzbGljZSIsIm1hcCIsImNoYWluIiwicXVldWVJdGVtIiwicG9wIiwiX3NlbGZBY2NlcHRlZCIsIl9zZWxmRGVjbGluZWQiLCJ0eXBlIiwiX21haW4iLCJwYXJlbnRJZCIsInBhcmVudCIsIl9kZWNsaW5lZERlcGVuZGVuY2llcyIsImNvbmNhdCIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsImFkZEFsbFRvU2V0IiwiYSIsImIiLCJpdGVtIiwiYXBwbGllZFVwZGF0ZSIsIndhcm5VbmV4cGVjdGVkUmVxdWlyZSIsImFib3J0RXJyb3IiLCJkb0FwcGx5IiwiZG9EaXNwb3NlIiwiY2hhaW5JbmZvIiwiam9pbiIsIm9uRGVjbGluZWQiLCJpZ25vcmVEZWNsaW5lZCIsIm9uVW5hY2NlcHRlZCIsImlnbm9yZVVuYWNjZXB0ZWQiLCJvbkFjY2VwdGVkIiwib25EaXNwb3NlZCIsImlkeCIsIm91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyIsImVycm9ySGFuZGxlciIsImtleXMiLCJmb3JFYWNoIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaG90RGlzcG9zZUNodW5rIiwiZGVwZW5kZW5jeSIsIm1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzIiwiZGF0YSIsImRpc3Bvc2VIYW5kbGVycyIsIl9kaXNwb3NlSGFuZGxlcnMiLCJjaGlsZCIsInNwbGljZSIsIm1vZHVsZXMiLCJlcnJvciIsImNhbGxiYWNrcyIsIm9uRXJyb3JlZCIsImRlcGVuZGVuY3lJZCIsImlnbm9yZUVycm9yZWQiLCJlcnIyIiwib3JpZ2luYWxFcnJvciIsImV4cG9ydHMiLCJsIiwiYWNjZXB0IiwiZGVwIiwiY2FsbGJhY2siLCJkZWNsaW5lIiwiZGlzcG9zZSIsImFkZERpc3Bvc2VIYW5kbGVyIiwicmVtb3ZlRGlzcG9zZUhhbmRsZXIiLCJjaGVjayIsImFkZFN0YXR1c0hhbmRsZXIiLCJyZW1vdmVTdGF0dXNIYW5kbGVyIiwidW5kZWZpbmVkIiwiaG90Q3JlYXRlTW9kdWxlIiwibSIsImQiLCJnZXR0ZXIiLCJvIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInMiLCJDb2xvciIsIlBpZWNlT3JpZW50YXRpb24iLCJUaWxlIiwiW29iamVjdCBPYmplY3RdIiwiY29sdW1uIiwicm93IiwidGhpcyIsIlBpZWNlIiwiY29sb3IiLCJvcmllbnRhdGlvbiIsInRpbGVyIiwiY2VudGVyIiwiY2xvY2t3aXNlIiwiY3VycmVudCIsIkEiLCJCIiwiQyIsIkQiLCJyb3RhdGVDbG9ja3dpc2UiLCJyb3RhdGVBbnRpQ2xvY2t3aXNlIiwidG9UaWxlcyIsInBvc2l0aW9ucyIsInRpbGVzIiwiQXJyYXkiLCJjb2x1bW5zIiwidiIsInBpZWNlcyIsIkxpZ2h0Qmx1ZSIsIkRhcmtCbHVlIiwiT3JhbmdlIiwiWWVsbG93IiwiTGlnaHRHcmVlbiIsIlB1cnBsZSIsIlJlZCIsImJvYXJkIiwicm93cyIsImNlbGxzIiwicGllY2UiLCJjYW5BZGQiLCJfIiwiY2VsbCIsInRoZVJvdyIsInRpbGUiLCJyb3dJc0Z1bGwiLCJmdWxsQ2VsbHMiLCJmdWxsUm93cyIsImV2ZXJ5IiwicmVuZGVyZXIiLCJ0aWxlUHgiLCJjYW52YXMiLCJzZXRBdHRyaWJ1dGUiLCJ0b1N0cmluZyIsImN0eCIsImdldENvbnRleHQiLCJmdWxsQWxwaGEiLCJjb2xvck9mIiwiYmVnaW5QYXRoIiwiY2xlYXJSZWN0IiwicmVjdCIsImdsb2JhbEFscGhhIiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJCYWNrZ3JvdW5kIiwiZmlsbCIsInN0cm9rZSIsImNsb3NlUGF0aCIsImdhbWUiLCJsYXN0VGlja1RpbWUiLCJjdXJyZW50UGVyaW9kTWlsbGlzIiwiZHJvcHBpbmciLCJzZWxmIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RlcCIsInRpY2siLCJmdWxsUm93QWxwaGEiLCJyZW5kZXIiLCJkZWxldGVSb3ciLCJub3ciLCJEYXRlIiwicGVyaW9kIiwiY3VycmVudFBpZWNlIiwiYWR2YW5jZSIsIm5ld1BpZWNlIiwiY3VycmVudENlbnRlciIsIm5ld0NlbnRlciIsInVwZGF0ZUN1cnJlbnQiLCJmaW5kRnVsbFJvd3MiLCJyYW5kb21QaWVjZSIsImFkZFBpZWNlIiwic2hpZnRlZCIsInJvdGF0ZSIsInJpZ2h0IiwibmV3Q3VycmVudCIsInJlbW92ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwic2hpZnQiLCJkcm9wIiwic3RhcnQiXSwibWFwcGluZ3MiOiJhQUdBLElBQUFBLEVBQUFDLE9BQUEsaUJBQ0FBLE9BQUEsaUJBQ0EsU0FBQUMsRUFBQUMsSUFpUkEsU0FBQUQsRUFBQUMsR0FDQSxJQUFBQyxFQUFBRixLQUFBRyxFQUFB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c291cmNlc0NvbnRlbnQiOlsiIFx0ZnVuY3Rpb24gaG90RGlzcG9zZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0ZGVsZXRlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdH1cbiBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4gXHR3aW5kb3dbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdID0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHtcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xuIFx0XHRpZiAocGFyZW50SG90VXBkYXRlQ2FsbGJhY2spIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcbiBcdH0gO1xuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbiBcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gXHRcdHNjcmlwdC5jaGFyc2V0ID0gXCJ1dGYtOFwiO1xuIFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiO1xuIFx0XHQ7XG4gXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdH1cblxuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KHJlcXVlc3RUaW1lb3V0KSB7XG4gXHRcdHJlcXVlc3RUaW1lb3V0ID0gcmVxdWVzdFRpbWVvdXQgfHwgMTAwMDA7XG4gXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gXHRcdFx0XHRyZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcIk5vIGJyb3dzZXIgc3VwcG9ydFwiKSk7XG4gXHRcdFx0fVxuIFx0XHRcdHRyeSB7XG4gXHRcdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuIFx0XHRcdFx0dmFyIHJlcXVlc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCI7XG4gXHRcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xuIFx0XHRcdFx0cmVxdWVzdC50aW1lb3V0ID0gcmVxdWVzdFRpbWVvdXQ7XG4gXHRcdFx0XHRyZXF1ZXN0LnNlbmQobnVsbCk7XG4gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gXHRcdFx0XHRyZXR1cm4gcmVqZWN0KGVycik7XG4gXHRcdFx0fVxuIFx0XHRcdHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRpZiAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XG4gXHRcdFx0XHRpZiAocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcbiBcdFx0XHRcdFx0Ly8gdGltZW91dFxuIFx0XHRcdFx0XHRyZWplY3QoXG4gXHRcdFx0XHRcdFx0bmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgdGltZWQgb3V0LlwiKVxuIFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XG4gXHRcdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGVcbiBcdFx0XHRcdFx0cmVzb2x2ZSgpO1xuIFx0XHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcbiBcdFx0XHRcdFx0Ly8gb3RoZXIgZmFpbHVyZVxuIFx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgZmFpbGVkLlwiKSk7XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHQvLyBzdWNjZXNzXG4gXHRcdFx0XHRcdHRyeSB7XG4gXHRcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuIFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG4gXHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xuIFx0XHRcdFx0XHRcdHJldHVybjtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRyZXNvbHZlKHVwZGF0ZSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fTtcbiBcdFx0fSk7XG4gXHR9XG5cbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCIwZTk0YWY3N2FiZjA2ODdmZWNmYVwiO1xuIFx0dmFyIGhvdFJlcXVlc3RUaW1lb3V0ID0gMTAwMDA7XG4gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcbiBcdHZhciBob3RDdXJyZW50Q2hpbGRNb2R1bGU7XG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdO1xuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHNUZW1wID0gW107XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkge1xuIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0aWYgKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XG4gXHRcdHZhciBmbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiBcdFx0XHRpZiAobWUuaG90LmFjdGl2ZSkge1xuIFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0pIHtcbiBcdFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA9PT0gLTEpIHtcbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0aG90Q3VycmVudENoaWxkTW9kdWxlID0gcmVxdWVzdDtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpID09PSAtMSkge1xuIFx0XHRcdFx0XHRtZS5jaGlsZHJlbi5wdXNoKHJlcXVlc3QpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRjb25zb2xlLndhcm4oXG4gXHRcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICtcbiBcdFx0XHRcdFx0XHRyZXF1ZXN0ICtcbiBcdFx0XHRcdFx0XHRcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgK1xuIFx0XHRcdFx0XHRcdG1vZHVsZUlkXG4gXHRcdFx0XHQpO1xuIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XG4gXHRcdH07XG4gXHRcdHZhciBPYmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gT2JqZWN0RmFjdG9yeShuYW1lKSB7XG4gXHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcbiBcdFx0XHRcdH0sXG4gXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9O1xuIFx0XHR9O1xuIFx0XHRmb3IgKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkgJiZcbiBcdFx0XHRcdG5hbWUgIT09IFwiZVwiICYmXG4gXHRcdFx0XHRuYW1lICE9PSBcInRcIlxuIFx0XHRcdCkge1xuIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBPYmplY3RGYWN0b3J5KG5hbWUpKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0Zm4uZSA9IGZ1bmN0aW9uKGNodW5rSWQpIHtcbiBcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInJlYWR5XCIpIGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCkudGhlbihmaW5pc2hDaHVua0xvYWRpbmcsIGZ1bmN0aW9uKGVycikge1xuIFx0XHRcdFx0ZmluaXNoQ2h1bmtMb2FkaW5nKCk7XG4gXHRcdFx0XHR0aHJvdyBlcnI7XG4gXHRcdFx0fSk7XG5cbiBcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XG4gXHRcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xuIFx0XHRcdFx0XHRpZiAoIWhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xuIFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fTtcbiBcdFx0Zm4udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdFx0aWYgKG1vZGUgJiAxKSB2YWx1ZSA9IGZuKHZhbHVlKTtcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy50KHZhbHVlLCBtb2RlICYgfjEpO1xuIFx0XHR9O1xuIFx0XHRyZXR1cm4gZm47XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7XG4gXHRcdHZhciBob3QgPSB7XG4gXHRcdFx0Ly8gcHJpdmF0ZSBzdHVmZlxuIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXG4gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcbiBcdFx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcbiBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcbiBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcbiBcdFx0XHRfbWFpbjogaG90Q3VycmVudENoaWxkTW9kdWxlICE9PSBtb2R1bGVJZCxcblxuIFx0XHRcdC8vIE1vZHVsZSBBUElcbiBcdFx0XHRhY3RpdmU6IHRydWUsXG4gXHRcdFx0YWNjZXB0OiBmdW5jdGlvbihkZXAsIGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRpZiAodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIikgaG90Ll9zZWxmQWNjZXB0ZWQgPSB0cnVlO1xuIFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGRlcCA9PT0gXCJmdW5jdGlvblwiKSBob3QuX3NlbGZBY2NlcHRlZCA9IGRlcDtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXG4gXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuIFx0XHRcdFx0XHRcdGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XG4gXHRcdFx0XHRlbHNlIGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwXSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XG4gXHRcdFx0fSxcbiBcdFx0XHRkZWNsaW5lOiBmdW5jdGlvbihkZXApIHtcbiBcdFx0XHRcdGlmICh0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKSBob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuIFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcbiBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xuIFx0XHRcdFx0ZWxzZSBob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xuIFx0XHRcdH0sXG4gXHRcdFx0ZGlzcG9zZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuIFx0XHRcdH0sXG4gXHRcdFx0YWRkRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcbiBcdFx0XHR9LFxuIFx0XHRcdHJlbW92ZURpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHR9LFxuXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXG4gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xuIFx0XHRcdFx0aWYgKCFsKSByZXR1cm4gaG90U3RhdHVzO1xuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbiBcdFx0XHR9LFxuIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG4gXHRcdFx0fSxcbiBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0fSxcblxuIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxuIFx0XHR9O1xuIFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XG4gXHRcdHJldHVybiBob3Q7XG4gXHR9XG5cbiBcdHZhciBob3RTdGF0dXNIYW5kbGVycyA9IFtdO1xuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xuXG4gXHRmdW5jdGlvbiBob3RTZXRTdGF0dXMobmV3U3RhdHVzKSB7XG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcbiBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XG4gXHR9XG5cbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcbiBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuIFx0dmFyIGhvdEF2YWlsYWJsZUZpbGVzTWFwID0ge307XG4gXHR2YXIgaG90RGVmZXJyZWQ7XG5cbiBcdC8vIFRoZSB1cGRhdGUgaW5mb1xuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcblxuIFx0ZnVuY3Rpb24gdG9Nb2R1bGVJZChpZCkge1xuIFx0XHR2YXIgaXNOdW1iZXIgPSAraWQgKyBcIlwiID09PSBpZDtcbiBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5KSB7XG4gXHRcdGlmIChob3RTdGF0dXMgIT09IFwiaWRsZVwiKSB7XG4gXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XG4gXHRcdH1cbiBcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGFwcGx5O1xuIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcbiBcdFx0cmV0dXJuIGhvdERvd25sb2FkTWFuaWZlc3QoaG90UmVxdWVzdFRpbWVvdXQpLnRoZW4oZnVuY3Rpb24odXBkYXRlKSB7XG4gXHRcdFx0aWYgKCF1cGRhdGUpIHtcbiBcdFx0XHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XG4gXHRcdFx0XHRyZXR1cm4gbnVsbDtcbiBcdFx0XHR9XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xuIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcblxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdGhvdERlZmVycmVkID0ge1xuIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxuIFx0XHRcdFx0XHRyZWplY3Q6IHJlamVjdFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHR2YXIgY2h1bmtJZCA9IDA7XG4gXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvbmUtYmxvY2tzXG4gXHRcdFx0e1xuIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cbiBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmXG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nID09PSAwICYmXG4gXHRcdFx0XHRob3RXYWl0aW5nRmlsZXMgPT09IDBcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIHByb21pc2U7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdGlmICghaG90QXZhaWxhYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxuIFx0XHRcdHJldHVybjtcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcbiBcdFx0Zm9yICh2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmICgtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XG4gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0aWYgKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90VXBkYXRlRG93bmxvYWRlZCgpIHtcbiBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XG4gXHRcdHZhciBkZWZlcnJlZCA9IGhvdERlZmVycmVkO1xuIFx0XHRob3REZWZlcnJlZCA9IG51bGw7XG4gXHRcdGlmICghZGVmZXJyZWQpIHJldHVybjtcbiBcdFx0aWYgKGhvdEFwcGx5T25VcGRhdGUpIHtcbiBcdFx0XHQvLyBXcmFwIGRlZmVycmVkIG9iamVjdCBpbiBQcm9taXNlIHRvIG1hcmsgaXQgYXMgYSB3ZWxsLWhhbmRsZWQgUHJvbWlzZSB0b1xuIFx0XHRcdC8vIGF2b2lkIHRyaWdnZXJpbmcgdW5jYXVnaHQgZXhjZXB0aW9uIHdhcm5pbmcgaW4gQ2hyb21lLlxuIFx0XHRcdC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NjU2NjZcbiBcdFx0XHRQcm9taXNlLnJlc29sdmUoKVxuIFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRcdHJldHVybiBob3RBcHBseShob3RBcHBseU9uVXBkYXRlKTtcbiBcdFx0XHRcdH0pXG4gXHRcdFx0XHQudGhlbihcbiBcdFx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XG4gXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcbiBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0KTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG4gXHRcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4gXHRcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKVxuIFx0XHRcdHRocm93IG5ldyBFcnJvcihcImFwcGx5KCkgaXMgb25seSBhbGxvd2VkIGluIHJlYWR5IHN0YXR1c1wiKTtcbiBcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiBcdFx0dmFyIGNiO1xuIFx0XHR2YXIgaTtcbiBcdFx0dmFyIGo7XG4gXHRcdHZhciBtb2R1bGU7XG4gXHRcdHZhciBtb2R1bGVJZDtcblxuIFx0XHRmdW5jdGlvbiBnZXRBZmZlY3RlZFN0dWZmKHVwZGF0ZU1vZHVsZUlkKSB7XG4gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFt1cGRhdGVNb2R1bGVJZF07XG4gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG5cbiBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKS5tYXAoZnVuY3Rpb24oaWQpIHtcbiBcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdGNoYWluOiBbaWRdLFxuIFx0XHRcdFx0XHRpZDogaWRcbiBcdFx0XHRcdH07XG4gXHRcdFx0fSk7XG4gXHRcdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiBcdFx0XHRcdHZhciBxdWV1ZUl0ZW0gPSBxdWV1ZS5wb3AoKTtcbiBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlSXRlbS5pZDtcbiBcdFx0XHRcdHZhciBjaGFpbiA9IHF1ZXVlSXRlbS5jaGFpbjtcbiBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0aWYgKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKSBjb250aW51ZTtcbiBcdFx0XHRcdGlmIChtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtZGVjbGluZWRcIixcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAobW9kdWxlLmhvdC5fbWFpbikge1xuIFx0XHRcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwidW5hY2NlcHRlZFwiLFxuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XG4gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcbiBcdFx0XHRcdFx0aWYgKCFwYXJlbnQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0XHRpZiAocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHRcdHR5cGU6IFwiZGVjbGluZWRcIixcbiBcdFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4gXHRcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdFx0XHRwYXJlbnRJZDogcGFyZW50SWRcbiBcdFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgIT09IC0xKSBjb250aW51ZTtcbiBcdFx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuIFx0XHRcdFx0XHRcdGlmICghb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdKVxuIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcbiBcdFx0XHRcdFx0XHRjb250aW51ZTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaChwYXJlbnRJZCk7XG4gXHRcdFx0XHRcdHF1ZXVlLnB1c2goe1xuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4gXHRcdFx0XHRcdFx0aWQ6IHBhcmVudElkXG4gXHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cblxuIFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHR0eXBlOiBcImFjY2VwdGVkXCIsXG4gXHRcdFx0XHRtb2R1bGVJZDogdXBkYXRlTW9kdWxlSWQsXG4gXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXM6IG91dGRhdGVkTW9kdWxlcyxcbiBcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzOiBvdXRkYXRlZERlcGVuZGVuY2llc1xuIFx0XHRcdH07XG4gXHRcdH1cblxuIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XG4gXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHR2YXIgaXRlbSA9IGJbaV07XG4gXHRcdFx0XHRpZiAoYS5pbmRleE9mKGl0ZW0pID09PSAtMSkgYS5wdXNoKGl0ZW0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXG4gXHRcdC8vIHRoZSBcIm91dGRhdGVkXCIgc3RhdHVzIGNhbiBwcm9wYWdhdGUgdG8gcGFyZW50cyBpZiB0aGV5IGRvbid0IGFjY2VwdCB0aGUgY2hpbGRyZW5cbiBcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG4gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0dmFyIGFwcGxpZWRVcGRhdGUgPSB7fTtcblxuIFx0XHR2YXIgd2FyblVuZXhwZWN0ZWRSZXF1aXJlID0gZnVuY3Rpb24gd2FyblVuZXhwZWN0ZWRSZXF1aXJlKCkge1xuIFx0XHRcdGNvbnNvbGUud2FybihcbiBcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVzdWx0Lm1vZHVsZUlkICsgXCIpIHRvIGRpc3Bvc2VkIG1vZHVsZVwiXG4gXHRcdFx0KTtcbiBcdFx0fTtcblxuIFx0XHRmb3IgKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVJZCA9IHRvTW9kdWxlSWQoaWQpO1xuIFx0XHRcdFx0LyoqIEB0eXBlIHtUT0RPfSAqL1xuIFx0XHRcdFx0dmFyIHJlc3VsdDtcbiBcdFx0XHRcdGlmIChob3RVcGRhdGVbaWRdKSB7XG4gXHRcdFx0XHRcdHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xuIFx0XHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdFx0cmVzdWx0ID0ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwiZGlzcG9zZWRcIixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogaWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdC8qKiBAdHlwZSB7RXJyb3J8ZmFsc2V9ICovXG4gXHRcdFx0XHR2YXIgYWJvcnRFcnJvciA9IGZhbHNlO1xuIFx0XHRcdFx0dmFyIGRvQXBwbHkgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBkb0Rpc3Bvc2UgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBjaGFpbkluZm8gPSBcIlwiO1xuIFx0XHRcdFx0aWYgKHJlc3VsdC5jaGFpbikge1xuIFx0XHRcdFx0XHRjaGFpbkluZm8gPSBcIlxcblVwZGF0ZSBwcm9wYWdhdGlvbjogXCIgKyByZXN1bHQuY2hhaW4uam9pbihcIiAtPiBcIik7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRzd2l0Y2ggKHJlc3VsdC50eXBlKSB7XG4gXHRcdFx0XHRcdGNhc2UgXCJzZWxmLWRlY2xpbmVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EZWNsaW5lZCkgb3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbiBcdFx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2Ugb2Ygc2VsZiBkZWNsaW5lOiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJkZWNsaW5lZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG4gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIGRlY2xpbmVkIGRlcGVuZGVuY3k6IFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdFwiIGluIFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQucGFyZW50SWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcInVuYWNjZXB0ZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vblVuYWNjZXB0ZWQpIG9wdGlvbnMub25VbmFjY2VwdGVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZVVuYWNjZXB0ZWQpXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIgKyBjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJhY2NlcHRlZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uQWNjZXB0ZWQpIG9wdGlvbnMub25BY2NlcHRlZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGRvQXBwbHkgPSB0cnVlO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiZGlzcG9zZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRpc3Bvc2VkKSBvcHRpb25zLm9uRGlzcG9zZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRkb0Rpc3Bvc2UgPSB0cnVlO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRkZWZhdWx0OlxuIFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVuZXhjZXB0aW9uIHR5cGUgXCIgKyByZXN1bHQudHlwZSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAoYWJvcnRFcnJvcikge1xuIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcbiBcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGFib3J0RXJyb3IpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKGRvQXBwbHkpIHtcbiBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSBob3RVcGRhdGVbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdC5vdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHRcdFx0XHRmb3IgKG1vZHVsZUlkIGluIHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdFx0XHRcdGlmIChcbiBcdFx0XHRcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzLFxuIFx0XHRcdFx0XHRcdFx0XHRtb2R1bGVJZFxuIFx0XHRcdFx0XHRcdFx0KVxuIFx0XHRcdFx0XHRcdCkge1xuIFx0XHRcdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pXG4gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xuIFx0XHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQoXG4gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSxcbiBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXVxuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChkb0Rpc3Bvc2UpIHtcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCBbcmVzdWx0Lm1vZHVsZUlkXSk7XG4gXHRcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gd2FyblVuZXhwZWN0ZWRSZXF1aXJlO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cbiBcdFx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xuIFx0XHRmb3IgKGkgPSAwOyBpIDwgb3V0ZGF0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0bW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gJiZcbiBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG4gXHRcdFx0KVxuIFx0XHRcdFx0b3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLnB1c2goe1xuIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG4gXHRcdFx0XHR9KTtcbiBcdFx0fVxuXG4gXHRcdC8vIE5vdyBpbiBcImRpc3Bvc2VcIiBwaGFzZVxuIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xuIFx0XHRPYmplY3Qua2V5cyhob3RBdmFpbGFibGVGaWxlc01hcCkuZm9yRWFjaChmdW5jdGlvbihjaHVua0lkKSB7XG4gXHRcdFx0aWYgKGhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdID09PSBmYWxzZSkge1xuIFx0XHRcdFx0aG90RGlzcG9zZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0fSk7XG5cbiBcdFx0dmFyIGlkeDtcbiBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XG4gXHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gXHRcdFx0bW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcbiBcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRpZiAoIW1vZHVsZSkgY29udGludWU7XG5cbiBcdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG4gXHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXG4gXHRcdFx0dmFyIGRpc3Bvc2VIYW5kbGVycyA9IG1vZHVsZS5ob3QuX2Rpc3Bvc2VIYW5kbGVycztcbiBcdFx0XHRmb3IgKGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHRjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcbiBcdFx0XHRcdGNiKGRhdGEpO1xuIFx0XHRcdH1cbiBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xuXG4gXHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcbiBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xuXG4gXHRcdFx0Ly8gcmVtb3ZlIG1vZHVsZSBmcm9tIGNhY2hlXG4gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuXG4gXHRcdFx0Ly8gd2hlbiBkaXNwb3NpbmcgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGRpc3Bvc2UgaGFuZGxlclxuIFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG5cbiBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxuIFx0XHRcdGZvciAoaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBjaGlsZCA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcbiBcdFx0XHRcdGlmICghY2hpbGQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0aWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkge1xuIFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXG4gXHRcdHZhciBkZXBlbmRlbmN5O1xuIFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXM7XG4gXHRcdGZvciAobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKVxuIFx0XHRcdCkge1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAobW9kdWxlKSB7XG4gXHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XG4gXHRcdFx0XHRcdFx0aWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XG4gXHRcdFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBtb2R1bGUuY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBOb3QgaW4gXCJhcHBseVwiIHBoYXNlXG4gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xuXG4gXHRcdGhvdEN1cnJlbnRIYXNoID0gaG90VXBkYXRlTmV3SGFzaDtcblxuIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XG4gXHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcHBsaWVkVXBkYXRlLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcbiBcdFx0dmFyIGVycm9yID0gbnVsbDtcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpXG4gXHRcdFx0KSB7XG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdGlmIChtb2R1bGUpIHtcbiBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdHZhciBjYWxsYmFja3MgPSBbXTtcbiBcdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldO1xuIFx0XHRcdFx0XHRcdGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XG4gXHRcdFx0XHRcdFx0aWYgKGNiKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2tzLmluZGV4T2YoY2IpICE9PSAtMSkgY29udGludWU7XG4gXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0XHRjYiA9IGNhbGxiYWNrc1tpXTtcbiBcdFx0XHRcdFx0XHR0cnkge1xuIFx0XHRcdFx0XHRcdFx0Y2IobW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMpO1xuIFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuIFx0XHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImFjY2VwdC1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3lJZDogbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV0sXG4gXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIExvYWQgc2VsZiBhY2NlcHRlZCBtb2R1bGVzXG4gXHRcdGZvciAoaSA9IDA7IGkgPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcbiBcdFx0XHRtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xuIFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcbiBcdFx0XHR0cnkge1xuIFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XG4gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gXHRcdFx0XHRpZiAodHlwZW9mIGl0ZW0uZXJyb3JIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiBcdFx0XHRcdFx0dHJ5IHtcbiBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xuIFx0XHRcdFx0XHR9IGNhdGNoIChlcnIyKSB7XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3ItaGFuZGxlci1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVycjIsXG4gXHRcdFx0XHRcdFx0XHRcdG9yaWdpbmFsRXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjI7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtYWNjZXB0LWVycm9yZWRcIixcbiBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcbiBcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcbiBcdFx0aWYgKGVycm9yKSB7XG4gXHRcdFx0aG90U2V0U3RhdHVzKFwiZmFpbFwiKTtcbiBcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuIFx0XHR9XG5cbiBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcbiBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiBcdFx0XHRyZXNvbHZlKG91dGRhdGVkTW9kdWxlcyk7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRob3Q6IGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCksXG4gXHRcdFx0cGFyZW50czogKGhvdEN1cnJlbnRQYXJlbnRzVGVtcCA9IGhvdEN1cnJlbnRQYXJlbnRzLCBob3RDdXJyZW50UGFyZW50cyA9IFtdLCBob3RDdXJyZW50UGFyZW50c1RlbXApLFxuIFx0XHRcdGNoaWxkcmVuOiBbXVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gX193ZWJwYWNrX2hhc2hfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5oID0gZnVuY3Rpb24oKSB7IHJldHVybiBob3RDdXJyZW50SGFzaDsgfTtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBob3RDcmVhdGVSZXF1aXJlKDApKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZW51bSBDb2xvciB7XG4gIExpZ2h0Qmx1ZSA9ICdjeWFuJyxcbiAgRGFya0JsdWUgPSAnYmx1ZScsXG4gIE9yYW5nZSA9ICdvcmFuZ2UnLFxuICBZZWxsb3cgPSAneWVsbG93JyxcbiAgTGlnaHRHcmVlbiA9ICdncmVlbicsXG4gIFB1cnBsZSA9ICdwdXJwbGUnLFxuICBSZWQgPSAncmVkJyxcbiAgQmFja2dyb3VuZCA9ICcjZWVlJ1xufVxuXG5lbnVtIFBpZWNlT3JpZW50YXRpb24ge1xuICBBLCBCLCBDLCBEXG59XG5cbmZ1bmN0aW9uIHJvdGF0ZUNsb2Nrd2lzZShjdXJyZW50OiBQaWVjZU9yaWVudGF0aW9uKSB7XG4gIGNvbnN0IHtBLCBCLCBDLCBEfSA9IFBpZWNlT3JpZW50YXRpb247XG4gIHN3aXRjaCAoY3VycmVudCkge1xuICAgIGNhc2UgQTpcbiAgICAgIHJldHVybiBCO1xuICAgIGNhc2UgQjpcbiAgICAgIHJldHVybiBDO1xuICAgIGNhc2UgQzpcbiAgICAgIHJldHVybiBEO1xuICAgIGNhc2UgRDpcbiAgICAgIHJldHVybiBBO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJvdGF0ZUFudGlDbG9ja3dpc2UoY3VycmVudDogUGllY2VPcmllbnRhdGlvbikge1xuICBjb25zdCB7QSwgQiwgQywgRH0gPSBQaWVjZU9yaWVudGF0aW9uO1xuICBzd2l0Y2ggKGN1cnJlbnQpIHtcbiAgICBjYXNlIEE6XG4gICAgICByZXR1cm4gRDtcbiAgICBjYXNlIEI6XG4gICAgICByZXR1cm4gQTtcbiAgICBjYXNlIEM6XG4gICAgICByZXR1cm4gQjtcbiAgICBjYXNlIEQ6XG4gICAgICByZXR1cm4gQztcbiAgfVxufVxuXG5jbGFzcyBUaWxlIHtcbiAgY29uc3RydWN0b3IocHVibGljIGNvbHVtbjogbnVtYmVyLCBwdWJsaWMgcm93OiBudW1iZXIpIHtcbiAgfVxufVxuXG50eXBlIFRpbGVyID0gKGNlbnRlcjogVGlsZSwgb3JpZW50YXRpb246IFBpZWNlT3JpZW50YXRpb24pID0+IEFycmF5PFRpbGU+O1xuXG5jbGFzcyBQaWVjZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBwdWJsaWMgY29sb3I6IENvbG9yLFxuICAgICAgcHVibGljIHJlYWRvbmx5IG9yaWVudGF0aW9uOiBQaWVjZU9yaWVudGF0aW9uLFxuICAgICAgcHVibGljIHJlYWRvbmx5IHRpbGVyOiBUaWxlclxuICApIHtcbiAgfVxuXG4gIHRvVGlsZXMoY2VudGVyOiBUaWxlKTogQXJyYXk8VGlsZT4ge1xuICAgIHJldHVybiB0aGlzLnRpbGVyKGNlbnRlciwgdGhpcy5vcmllbnRhdGlvbik7XG4gIH1cblxuICByb3RhdGUoY2xvY2t3aXNlOiBib29sZWFuKTogUGllY2Uge1xuICAgIGlmIChjbG9ja3dpc2UpIHtcbiAgICAgIHJldHVybiBuZXcgUGllY2UodGhpcy5jb2xvciwgcm90YXRlQ2xvY2t3aXNlKHRoaXMub3JpZW50YXRpb24pLCB0aGlzLnRpbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBQaWVjZSh0aGlzLmNvbG9yLCByb3RhdGVBbnRpQ2xvY2t3aXNlKHRoaXMub3JpZW50YXRpb24pLCB0aGlzLnRpbGVyKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbmV3U3RpY2soKTogUGllY2Uge1xuICBmdW5jdGlvbiBzdGlja1RpbGVyKGNlbnRlcjogVGlsZSwgb3JpZW50YXRpb246IFBpZWNlT3JpZW50YXRpb24pOiBBcnJheTxUaWxlPiB7XG4gICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkE6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAwLCAwLCAwXSxcbiAgICAgICAgICBbMSwgMSwgMSwgMV0sXG4gICAgICAgICAgWzAsIDAsIDAsIDBdLFxuICAgICAgICAgIFswLCAwLCAwLCAwXSxcbiAgICAgICAgXSk7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uQjpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDEsIDAsIDBdLFxuICAgICAgICAgIFswLCAxLCAwLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMCwgMF0sXG4gICAgICAgICAgWzAsIDEsIDAsIDBdLFxuICAgICAgICBdKTtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5DOlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMCwgMCwgMCwgMF0sXG4gICAgICAgICAgWzAsIDAsIDAsIDBdLFxuICAgICAgICAgIFsxLCAxLCAxLCAxXSxcbiAgICAgICAgICBbMCwgMCwgMCwgMF0sXG4gICAgICAgIF0pO1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkQ6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAwLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMCwgMSwgMF0sXG4gICAgICAgICAgWzAsIDAsIDEsIDBdLFxuICAgICAgICAgIFswLCAwLCAxLCAwXSxcbiAgICAgICAgXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBQaWVjZShDb2xvci5MaWdodEJsdWUsIFBpZWNlT3JpZW50YXRpb24uQSwgc3RpY2tUaWxlcik7XG59XG5cbmZ1bmN0aW9uIHRvVGlsZXMoY2VudGVyOiBUaWxlLCBwb3NpdGlvbnM6IEFycmF5PEFycmF5PG51bWJlcj4+KTogQXJyYXk8VGlsZT4ge1xuICBjb25zdCB0aWxlcyA9IEFycmF5PFRpbGU+KCk7XG4gIHBvc2l0aW9ucy5mb3JFYWNoKChjb2x1bW5zLCByb3cpID0+IHtcbiAgICBjb2x1bW5zLmZvckVhY2goKHYsIGNvbHVtbikgPT4ge1xuICAgICAgaWYgKHYpIHtcbiAgICAgICAgdGlsZXMucHVzaChuZXcgVGlsZShjZW50ZXIuY29sdW1uICsgY29sdW1uLCBjZW50ZXIucm93ICsgcm93KSk7XG4gICAgICB9XG4gICAgfSlcbiAgfSk7XG4gIHJldHVybiB0aWxlcztcbn1cblxuZnVuY3Rpb24gbmV3SigpOiBQaWVjZSB7XG4gIGZ1bmN0aW9uIGpUaWxlcihjZW50ZXI6IFRpbGUsIG9yaWVudGF0aW9uOiBQaWVjZU9yaWVudGF0aW9uKTogQXJyYXk8VGlsZT4ge1xuICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5BOlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMSwgMCwgMF0sXG4gICAgICAgICAgWzEsIDEsIDFdLFxuICAgICAgICAgIFswLCAwLCAwXSxcbiAgICAgICAgXSk7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uQjpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDEsIDFdLFxuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMF0sXG4gICAgICAgIF0pO1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkM6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAwLCAwXSxcbiAgICAgICAgICBbMSwgMSwgMV0sXG4gICAgICAgICAgWzAsIDAsIDFdLFxuICAgICAgICBdKTtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5EOlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMCwgMSwgMF0sXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICAgIFsxLCAxLCAwXSxcbiAgICAgICAgXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgUGllY2UoQ29sb3IuRGFya0JsdWUsIFBpZWNlT3JpZW50YXRpb24uQSwgalRpbGVyKTtcbn1cblxuZnVuY3Rpb24gbmV3TCgpOiBQaWVjZSB7XG4gIGZ1bmN0aW9uIGxUaWxlcihjZW50ZXI6IFRpbGUsIG9yaWVudGF0aW9uOiBQaWVjZU9yaWVudGF0aW9uKTogQXJyYXk8VGlsZT4ge1xuICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5BOlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMCwgMCwgMV0sXG4gICAgICAgICAgWzEsIDEsIDFdLFxuICAgICAgICAgIFswLCAwLCAwXSxcbiAgICAgICAgXSk7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uQjpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMV0sXG4gICAgICAgIF0pO1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkM6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAwLCAwXSxcbiAgICAgICAgICBbMSwgMSwgMV0sXG4gICAgICAgICAgWzEsIDAsIDBdLFxuICAgICAgICBdKTtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5EOlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMSwgMSwgMF0sXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgUGllY2UoQ29sb3IuT3JhbmdlLCBQaWVjZU9yaWVudGF0aW9uLkEsIGxUaWxlcik7XG59XG5cbmZ1bmN0aW9uIG5ld1NxdWFyZSgpOiBQaWVjZSB7XG4gIGZ1bmN0aW9uIHNxdWFyZVRpbGVyKGNlbnRlcjogVGlsZSwgb3JpZW50YXRpb246IFBpZWNlT3JpZW50YXRpb24pOiBBcnJheTxUaWxlPiB7XG4gICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICBbMSwgMV0sXG4gICAgICBbMSwgMV0sXG4gICAgXSk7XG4gIH1cbiAgcmV0dXJuIG5ldyBQaWVjZShDb2xvci5ZZWxsb3csIFBpZWNlT3JpZW50YXRpb24uQSwgc3F1YXJlVGlsZXIpO1xufVxuXG5mdW5jdGlvbiBuZXdTKCk6IFBpZWNlIHtcbiAgZnVuY3Rpb24gc1RpbGVyKGNlbnRlcjogVGlsZSwgb3JpZW50YXRpb246IFBpZWNlT3JpZW50YXRpb24pOiBBcnJheTxUaWxlPiB7XG4gICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkE6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAxLCAxXSxcbiAgICAgICAgICBbMSwgMSwgMF0sXG4gICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICBdKTtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5COlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMCwgMSwgMF0sXG4gICAgICAgICAgWzAsIDEsIDFdLFxuICAgICAgICAgIFswLCAwLCAxXSxcbiAgICAgICAgXSk7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uQzpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICAgIFswLCAxLCAxXSxcbiAgICAgICAgICBbMSwgMSwgMF0sXG4gICAgICAgIF0pO1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkQ6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFsxLCAwLCAwXSxcbiAgICAgICAgICBbMSwgMSwgMF0sXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICBdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBQaWVjZShDb2xvci5MaWdodEdyZWVuLCBQaWVjZU9yaWVudGF0aW9uLkEsIHNUaWxlcik7XG59XG5cbmZ1bmN0aW9uIG5ld1QoKTogUGllY2Uge1xuICBmdW5jdGlvbiB0VGlsZXIoY2VudGVyOiBUaWxlLCBvcmllbnRhdGlvbjogUGllY2VPcmllbnRhdGlvbik6IEFycmF5PFRpbGU+IHtcbiAgICBzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uQTpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICAgIFsxLCAxLCAxXSxcbiAgICAgICAgICBbMCwgMCwgMF0sXG4gICAgICAgIF0pO1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkI6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMV0sXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICBdKTtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5DOlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMCwgMCwgMF0sXG4gICAgICAgICAgWzEsIDEsIDFdLFxuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgXSk7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uRDpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDEsIDBdLFxuICAgICAgICAgIFsxLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMF0sXG4gICAgICAgIF0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3IFBpZWNlKENvbG9yLlB1cnBsZSwgUGllY2VPcmllbnRhdGlvbi5BLCB0VGlsZXIpO1xufVxuXG5mdW5jdGlvbiBuZXdaKCk6IFBpZWNlIHtcbiAgZnVuY3Rpb24gelRpbGVyKGNlbnRlcjogVGlsZSwgb3JpZW50YXRpb246IFBpZWNlT3JpZW50YXRpb24pOiBBcnJheTxUaWxlPiB7XG4gICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkE6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFsxLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMV0sXG4gICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICBdKTtcbiAgICAgIGNhc2UgUGllY2VPcmllbnRhdGlvbi5COlxuICAgICAgICByZXR1cm4gdG9UaWxlcyhjZW50ZXIsIFtcbiAgICAgICAgICBbMCwgMCwgMV0sXG4gICAgICAgICAgWzAsIDEsIDFdLFxuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgXSk7XG4gICAgICBjYXNlIFBpZWNlT3JpZW50YXRpb24uQzpcbiAgICAgICAgcmV0dXJuIHRvVGlsZXMoY2VudGVyLCBbXG4gICAgICAgICAgWzAsIDAsIDBdLFxuICAgICAgICAgIFsxLCAxLCAwXSxcbiAgICAgICAgICBbMCwgMSwgMV0sXG4gICAgICAgIF0pO1xuICAgICAgY2FzZSBQaWVjZU9yaWVudGF0aW9uLkQ6XG4gICAgICAgIHJldHVybiB0b1RpbGVzKGNlbnRlciwgW1xuICAgICAgICAgIFswLCAxLCAwXSxcbiAgICAgICAgICBbMSwgMSwgMF0sXG4gICAgICAgICAgWzEsIDAsIDBdLFxuICAgICAgICBdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBQaWVjZShDb2xvci5SZWQsIFBpZWNlT3JpZW50YXRpb24uQSwgelRpbGVyKTtcbn1cblxudHlwZSBDZWxsID0gUGllY2UgfCBudWxsXG5cbmNsYXNzIEJvYXJkIHtcblxuICBwcml2YXRlIHJlYWRvbmx5IGNlbGxzOiBDZWxsW11bXTtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29sdW1uczogbnVtYmVyID0gMTAsIHB1YmxpYyByb3dzOiBudW1iZXIgPSAyMCkge1xuICAgIHRoaXMuY2VsbHMgPSBuZXcgQXJyYXk8Q2VsbFtdPihyb3dzKTtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCByb3dzOyByb3crKykge1xuICAgICAgdGhpcy5jZWxsc1tyb3ddID0gbmV3IEFycmF5KGNvbHVtbnMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRQaWVjZShwaWVjZTogUGllY2UsIGNlbnRlcjogVGlsZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRpbGVzID0gcGllY2UudG9UaWxlcyhjZW50ZXIpO1xuICAgIGlmICghdGhpcy5jYW5BZGQodGlsZXMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlKHRpbGVzLCBwaWVjZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlKHBpZWNlOiBQaWVjZSwgY2VudGVyOiBUaWxlKSB7XG4gICAgY29uc3QgdGlsZXMgPSBwaWVjZS50b1RpbGVzKGNlbnRlcik7XG4gICAgdGhpcy51cGRhdGUodGlsZXMsIG51bGwpO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZVJvdyhyb3c6IG51bWJlcikge1xuICAgIC8vIGVtcHR5IHRoZSByb3dcbiAgICB0aGlzLmNlbGxzW3Jvd10uZm9yRWFjaCgoXywgY2VsbCwgdGhlUm93KSA9PiB7XG4gICAgICB0aGVSb3dbY2VsbF0gPSBudWxsO1xuICAgIH0pO1xuICAgIC8vIG1vdmUgZXZlcnl0aGluZyBhYm92ZSBkb3duIGJ5IDEgcm93XG4gICAgZm9yIChsZXQgciA9IHJvdyAtIDE7IHIgPj0wIDsgci0tKSB7XG4gICAgICB0aGlzLmNlbGxzW3JdLmZvckVhY2goKHRpbGUsIGNlbGwpID0+IHtcbiAgICAgICAgdGhpcy5jZWxsc1tyICsgMV1bY2VsbF0gPSB0aWxlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNvbG9yT2YoY29sdW1uOiBudW1iZXIsIHJvdzogbnVtYmVyKTogQ29sb3Ige1xuICAgIGNvbnN0IGNlbGwgPSB0aGlzLmNlbGxzW3Jvd11bY29sdW1uXTtcbiAgICByZXR1cm4gY2VsbCAmJiBjZWxsLmNvbG9yO1xuICB9XG5cbiAgcHVibGljIGZpbmRGdWxsUm93cygpOiBBcnJheTxudW1iZXI+IHtcbiAgICBjb25zdCByb3dJc0Z1bGwgPSAocm93OiBBcnJheTxDZWxsPikgPT4ge1xuICAgICAgbGV0IGZ1bGxDZWxscyA9IDA7XG4gICAgICBmb3IgKGxldCByID0gMDsgciA8IHJvdy5sZW5ndGg7IHIrKykge1xuICAgICAgICBjb25zdCBjZWxsID0gcm93W3JdO1xuICAgICAgICBpZiAoY2VsbCAhPT0gbnVsbCAmJiBjZWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBmdWxsQ2VsbHMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bGxDZWxscyA9PT0gcm93Lmxlbmd0aDtcbiAgICB9O1xuICAgIGNvbnN0IGZ1bGxSb3dzID0gW107XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCB0aGlzLmNlbGxzLmxlbmd0aDsgcisrKSB7XG4gICAgICBpZiAocm93SXNGdWxsKHRoaXMuY2VsbHNbcl0pKSB7XG4gICAgICAgIGZ1bGxSb3dzLnB1c2gocik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdWxsUm93cztcbiAgfVxuXG4gIHByaXZhdGUgY2FuQWRkKHRpbGVzOiBBcnJheTxUaWxlPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aWxlcy5ldmVyeSgoe2NvbHVtbiwgcm93fSkgPT4ge1xuICAgICAgcmV0dXJuIGNvbHVtbiA+PSAwICYmIGNvbHVtbiA8IHRoaXMuY29sdW1uc1xuICAgICAgICAgICYmIHJvdyA+PSAwICYmIHJvdyA8IHRoaXMucm93c1xuICAgICAgICAgICYmICh0aGlzLmNlbGxzW3Jvd11bY29sdW1uXSA9PSBudWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlKHRpbGVzOiBBcnJheTxUaWxlPiwgcGllY2U6IFBpZWNlKSB7XG4gICAgdGlsZXMuZm9yRWFjaCgoe2NvbHVtbiwgcm93fSkgPT4ge1xuICAgICAgdGhpcy5jZWxsc1tyb3ddW2NvbHVtbl0gPSBwaWVjZTtcbiAgICB9KTtcbiAgfVxufVxuXG5jbGFzcyBCb2FyZFJlbmRlcmVyIHtcblxuICBwdWJsaWMgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHVibGljIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB0aWxlUHg6IG51bWJlciA9IDMwLCBwdWJsaWMgYm9hcmQ6IEJvYXJkKSB7XG4gICAgY29uc3Qge2NvbHVtbnMsIHJvd3N9ID0gYm9hcmQ7XG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICB0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgKHRpbGVQeCAqIGNvbHVtbnMpLnRvU3RyaW5nKCkpO1xuICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgKHRpbGVQeCAqIHJvd3MpLnRvU3RyaW5nKCkpO1xuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoZnVsbFJvd3M6IEFycmF5PG51bWJlcj4gPSBbXSwgZnVsbEFscGhhOiBudW1iZXIgPSAxLjApIHtcbiAgICBjb25zdCB7Y29sdW1ucywgcm93c30gPSB0aGlzLmJvYXJkO1xuICAgIGNvbnN0IHt0aWxlUHgsIGN0eH0gPSB0aGlzO1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHJvd3M7IHJvdysrKSB7XG4gICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCBjb2x1bW5zOyBjb2x1bW4rKykge1xuICAgICAgICBsZXQgY29sb3IgPSB0aGlzLmJvYXJkLmNvbG9yT2YoY29sdW1uLCByb3cpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoY29sdW1uICogdGlsZVB4LCByb3cgKiB0aWxlUHgsIHRpbGVQeCwgdGlsZVB4KTtcbiAgICAgICAgY3R4LnJlY3QoY29sdW1uICogdGlsZVB4LCByb3cgKiB0aWxlUHgsIHRpbGVQeCwgdGlsZVB4KTtcbiAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgaWYgKGZ1bGxSb3dzLmluZGV4T2Yocm93KSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IGZ1bGxBbHBoYTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMS4wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMC41KSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IENvbG9yLkJhY2tncm91bmQ7XG4gICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KSc7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuY2xhc3MgR2FtZSB7XG5cbiAgcHJpdmF0ZSBjdXJyZW50UGllY2U6IFBpZWNlO1xuICBwcml2YXRlIGN1cnJlbnRDZW50ZXI6IFRpbGU7XG4gIHByaXZhdGUgY3VycmVudFBlcmlvZE1pbGxpczogbnVtYmVyO1xuICBwcml2YXRlIGxhc3RUaWNrVGltZTogbnVtYmVyO1xuICBwcml2YXRlIGRyb3BwaW5nOiBib29sZWFuO1xuICBwdWJsaWMgZnVsbFJvd3M6IEFycmF5PG51bWJlcj47XG4gIHByaXZhdGUgZnVsbFJvd0FscGhhOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBwcml2YXRlIHJlYWRvbmx5IGJvYXJkOiBCb2FyZCxcbiAgICAgIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyZXI6IEJvYXJkUmVuZGVyZXIsXG4gICAgICBwcml2YXRlIHJlYWRvbmx5IHBpZWNlczogQXJyYXk8KCgpID0+IFBpZWNlKT5cbiAgKSB7XG4gICAgdGhpcy5sYXN0VGlja1RpbWUgPSAwO1xuICAgIHRoaXMuY3VycmVudFBlcmlvZE1pbGxpcyA9IDgwMDtcbiAgICB0aGlzLmRyb3BwaW5nID0gZmFsc2U7XG4gICAgdGhpcy5mdWxsUm93cyA9IFtdO1xuICB9XG5cbiAgcHVibGljIHN0YXJ0KCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIHN0ZXAoKSB7XG4gICAgICBzZWxmLnRpY2soKTtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfVxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gIH1cblxuICBwdWJsaWMgdGljaygpIHtcbiAgICBpZiAodGhpcy5mdWxsUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBhc3NlcnQ6ICFkcm9wcGluZyAmJiB0aGlzLmN1cnJlbnRQaWVjZSA9PSBudWxsXG4gICAgICB0aGlzLmZ1bGxSb3dBbHBoYSAtPSAwLjA0O1xuICAgICAgaWYgKHRoaXMuZnVsbFJvd0FscGhhID4gMCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLmZ1bGxSb3dzLCB0aGlzLmZ1bGxSb3dBbHBoYSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGxldCByb3cgb2YgdGhpcy5mdWxsUm93cykge1xuICAgICAgICAgIHRoaXMuYm9hcmQuZGVsZXRlUm93KHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mdWxsUm93cyA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcGVyaW9kID0gdGhpcy5kcm9wcGluZyA/IDIwIDogdGhpcy5jdXJyZW50UGVyaW9kTWlsbGlzO1xuICAgICAgaWYgKChub3cgLSB0aGlzLmxhc3RUaWNrVGltZSkgPj0gcGVyaW9kKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRQaWVjZSkge1xuICAgICAgICAgIHRoaXMuYWR2YW5jZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubmV3UGllY2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpO1xuICAgICAgICB0aGlzLmxhc3RUaWNrVGltZSA9IG5vdztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkdmFuY2UoKSB7XG4gICAgY29uc3Qge2NvbHVtbiwgcm93fSA9IHRoaXMuY3VycmVudENlbnRlcjtcbiAgICBjb25zdCBuZXdDZW50ZXIgPSBuZXcgVGlsZShjb2x1bW4sIHJvdyArIDEpO1xuICAgIGlmICghdGhpcy51cGRhdGVDdXJyZW50KHRoaXMuY3VycmVudFBpZWNlLCBuZXdDZW50ZXIpKSB7XG4gICAgICB0aGlzLmZ1bGxSb3dzID0gdGhpcy5ib2FyZC5maW5kRnVsbFJvd3MoKTtcbiAgICAgIGlmICh0aGlzLmZ1bGxSb3dzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHRoaXMubmV3UGllY2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZnVsbFJvd0FscGhhID0gMS4wO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbmV3UGllY2UoKSB7XG4gICAgdGhpcy5kcm9wcGluZyA9IGZhbHNlO1xuICAgIGNvbnN0IHBpZWNlID0gdGhpcy5yYW5kb21QaWVjZSgpO1xuICAgIHRoaXMuYWRkUGllY2UocGllY2UsIG5ldyBUaWxlKDQsIDApKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRQaWVjZShwaWVjZTogUGllY2UsIGNlbnRlcjogVGlsZSkge1xuICAgIGlmICh0aGlzLmJvYXJkLmFkZFBpZWNlKHBpZWNlLCBjZW50ZXIpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRQaWVjZSA9IHBpZWNlO1xuICAgICAgdGhpcy5jdXJyZW50Q2VudGVyID0gY2VudGVyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByb3RhdGUoY2xvY2t3aXNlOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFBpZWNlICYmICF0aGlzLmRyb3BwaW5nKSB7XG4gICAgICBjb25zdCBzaGlmdGVkID0gdGhpcy5jdXJyZW50UGllY2Uucm90YXRlKGNsb2Nrd2lzZSk7XG4gICAgICB0aGlzLnVwZGF0ZUN1cnJlbnQoc2hpZnRlZCwgdGhpcy5jdXJyZW50Q2VudGVyKVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzaGlmdChyaWdodDogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLmN1cnJlbnRQaWVjZSAmJiAhdGhpcy5kcm9wcGluZykge1xuICAgICAgY29uc3Qge2NvbHVtbiwgcm93fSA9IHRoaXMuY3VycmVudENlbnRlcjtcbiAgICAgIGNvbnN0IGNvbHVtbkRlbHRhID0gcmlnaHQgPyAxIDogLTE7XG4gICAgICBjb25zdCBuZXdDZW50ZXIgPSBuZXcgVGlsZShjb2x1bW4gKyBjb2x1bW5EZWx0YSwgcm93KTtcbiAgICAgIHRoaXMudXBkYXRlQ3VycmVudCh0aGlzLmN1cnJlbnRQaWVjZSwgbmV3Q2VudGVyKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZHJvcCgpIHtcbiAgICB0aGlzLmRyb3BwaW5nID0gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ3VycmVudChuZXdDdXJyZW50OiBQaWVjZSwgbmV3Q2VudGVyOiBUaWxlKTogYm9vbGVhbiB7XG4gICAgdGhpcy5ib2FyZC5yZW1vdmUodGhpcy5jdXJyZW50UGllY2UsIHRoaXMuY3VycmVudENlbnRlcik7XG4gICAgaWYgKCF0aGlzLmJvYXJkLmFkZFBpZWNlKG5ld0N1cnJlbnQsIG5ld0NlbnRlcikpIHtcbiAgICAgIHRoaXMuYm9hcmQuYWRkUGllY2UodGhpcy5jdXJyZW50UGllY2UsIHRoaXMuY3VycmVudENlbnRlcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudFBpZWNlID0gbmV3Q3VycmVudDtcbiAgICAgIHRoaXMuY3VycmVudENlbnRlciA9IG5ld0NlbnRlcjtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJhbmRvbVBpZWNlKCkge1xuICAgIHJldHVybiB0aGlzLnBpZWNlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLnBpZWNlcy5sZW5ndGgpXSgpO1xuICB9XG59XG5cbmNvbnN0IHBpZWNlcyA9IFtcbiAgICBuZXdTdGljayxcbiAgICBuZXdKLFxuICAgIG5ld0wsXG4gICAgbmV3U3F1YXJlLFxuICAgIG5ld1MsXG4gICAgbmV3VCxcbiAgICBuZXdaLFxuXTtcbmNvbnN0IGJvYXJkID0gbmV3IEJvYXJkKCk7XG5jb25zdCByZW5kZXJlciA9IG5ldyBCb2FyZFJlbmRlcmVyKDMwLCBib2FyZCk7XG5jb25zdCBnYW1lID0gbmV3IEdhbWUoYm9hcmQsIHJlbmRlcmVyLCBwaWVjZXMpO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5jYW52YXMpO1xucmVuZGVyZXIucmVuZGVyKCk7XG5cbi8vIGRlYnVnXG4oPGFueT53aW5kb3cpLmdhbWUgPSBnYW1lO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgc3dpdGNoIChlLmtleSkge1xuICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgZ2FtZS5yb3RhdGUoZmFsc2UpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgIGdhbWUucm90YXRlKHRydWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgIGdhbWUuc2hpZnQoZmFsc2UpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICBnYW1lLnNoaWZ0KHRydWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnICc6XG4gICAgICBnYW1lLmRyb3AoKTtcbiAgICAgIGJyZWFrO1xuICB9XG59KTtcblxuZ2FtZS5zdGFydCgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==